---
simd: '0023'
title: Archiving snapshots on Arweave
authors:

- Joshua Benaron
  category: Standard/Meta
  type: Core
  status: Draft
  created: 2023-04-12
  feature: (fill in with feature tracking issues once accepted)

---

## Summary

This proposal's aim is to start a discussion around storing Solana's ledger history and hourly snapshots on Arweave,
paying out of Solana's inflation.

## Abstract

This proposal will ensure that snapshots are stored securely and permanently, while also making them easily accessible
for future use. The proposal also describes a method for funding the storage costs using inflation emissions.

## Motivation

Storing Solana's snapshots on Arweave ensures that they are stored securely and permanently, while also making them
easily accessible for future use. However, storing data on Arweave incurs storage costs, which need to be paid for by
someone. This proposal suggests using a portion of the inflation emissions generated by the Solana blockchain to fund
the storage costs.

## New Terminology

N/A

## Design

### Overview

The overall design uses a Geyser Plugin to stream and aggregate transactions and blocks into a DB (e.g. Postgres),
allowing us to compress and store on Arweave, using Bundlr. We'll then take incremental hourly snapshots and store them
on Arweave.

Bundlr is a scaling solution for Arweave which allows instant upload/retrieval, supporting >20k TPS and the ability to pay for
storage in multiple tokens, including SOL. Bundlr is currently handling >90% of transactions on Arweave.

### Snapshot Selection Process

An hourly snapshot is taken and stored on Arweave with tags used for searchability. Tags on Arweave allow for efficient searchability 
for all snapshots stored on the network.

Process of snapshot validation before storage... TODO

### Geyser Plugin Specifications

Detailed technical specifications of the Geyser Plugin, as much as possible but maybe just a high level is fine for the
initial proposal.
How the plugin interacts with the Solana network and Arweave.

...TODO

### Snapshot Storage Costs Estimates and Inflation Emission Distribution

The cost per PB on Arweave is currently ~$7m. This means the estimated annual cost to Solana would be ~Â£Xm

In terms of a method for incentivization - a possible solution is to payout more inflation rewards to validators
who choose to archive state.

Another option is the foundation pays for the storage of the archives, similar to the BigQuery setup that currently exists

### Bundlr Integration

The Bundlr integration requires integrating the [Bundlr Rust SDK](https://github.com/Bundlr-Network/rust-sdk)

### Performance and Scalability

Analysis of the proposal's impact on Solana's performance and scalability (probably none for Geyser plugin but I'm hazy
on the details here and need to do some reading)
Evaluation of Arweave's capacity to handle the storage requirements of Solana's snapshots.
Future-proofing considerations for both Solana and Arweave networks?

There shouldn't be any large performance issues with the Geyser plugin.

Arweave has no storage capacity (i.e. it has no limits) and Bundlr is built in such a way that data is buffered on to the network efficiently.
Bundlr also provides guarantees around data being stored on Arweave correctly. This means Bundlr can act as a safe
transport layer for data getting on to Arweave

## Impact

Storing Solana's snapshots on Arweave ensures that they are stored securely and permanently, while also making them
easily accessible for future use. Funding the storage costs using a portion of the inflation emissions generated by the
Solana blockchain ensures that the costs are paid for in a sustainable and scalable manner. Additionally, it provides a
way for validators to contribute to the long-term viability of the Solana blockchain.

## Security Considerations

There will need to be some way to prove that the snapshot is valid and correct.

## Backwards Compatibility

[TBD]

## Drawbacks

[TBD]